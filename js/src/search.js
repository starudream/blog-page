var appId=$("#algolia_app_id").val(),indexName=$("#algolia_index").val(),token=$("#algolia_token").val(),client=algoliasearch(appId,token,{}),index=client.initIndex(indexName),buildTags=function(e){var a="<small>";return a+=e.map(function(e){return e.value}).join(" · "),a+="</small>"},buildItem=function(e){return'<div class="panel-block"><a href="'+e.permalink.value+'"><article class="media"><figure class="media-left"><p class="image is-64x64"><img src="'+(e.cover&&e.cover.value?e.cover.value:"http://githubimg.wxio.club/h.png")+'"></p></figure><div class="media-content"><div class="content"><strong>'+e.title.value+"</strong><br>"+buildTags(e.tags)+"<br>"+e.contentStripTruncate.value+"</div></div></article></a></div>"},hitsStored=[],search=function(e){$("#searchContainer").addClass("is-loading"),index.search({query:e,hitsPerPage:10,page:0,analytics:!1,attributesToRetrieve:"*",attributesToSnippet:"*:20",getRankingInfo:!0,snippetEllipsisText:"…",responseFields:"*",facets:"*,"},function(e,a){var i=a.hits;if(e)throw $("#searchContainer").removeClass("is-loading"),e;$("#result").html(""),(hitsStored=i)&&hitsStored&&hitsStored.forEach(function(e){$("#result").append(buildItem(e._snippetResult))}),$("#searchContainer").removeClass("is-loading")})};$(function(){$("#close").on("click",function(e){e.preventDefault(),$("#search-container").removeClass("search-container-active"),$("#searchField").off("change paste keyup")}),$("#search").on("click touchstart",function(e){e.preventDefault(),$("#search-container").addClass("search-container-active"),$("#searchField").focus();var i="";search(i),$("#searchField").on("change paste keyup",function(e){e.preventDefault();var a=$("#searchField").val();a!==i&&search(i=a)})})});